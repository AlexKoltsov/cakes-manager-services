name: Build cakes manager services

on:
  pull_request:
    branches: [ master ]

jobs:

  build-common-lib:
    uses: AlexKoltsov/cakes-manager-services/.github/workflows/build-with-maven.yml@docker-push
    with:
      artifact-name: common-lib

  build-cakes-service:
    needs: build-common-lib
    uses: AlexKoltsov/cakes-manager-services/.github/workflows/build-with-maven.yml@docker-push
    with:
      artifact-name: cakes-service

  build-orders-service:
    needs: build-common-lib
    uses: AlexKoltsov/cakes-manager-services/.github/workflows/build-with-maven.yml@docker-push
    with:
      artifact-name: orders-service

  build-people-service:
    needs: build-common-lib
    uses: AlexKoltsov/cakes-manager-services/.github/workflows/build-with-maven.yml@docker-push
    with:
      artifact-name: people-service

  build-service-discovery:
    uses: AlexKoltsov/cakes-manager-services/.github/workflows/build-with-maven.yml@docker-push
    with:
      artifact-name: service-discovery

  build-data-generator:
    needs: build-common-lib
    uses: AlexKoltsov/cakes-manager-services/.github/workflows/build-with-maven.yml@docker-push
    with:
      artifact-name: data-generator
